<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- Mantido o CSS original -->
</head>
<body>
  <!-- Cabeçalho e Hero mantidos -->

  <!-- Seção de Doenças em Destaque (sem alterações) -->

  <!-- Seção de Recursos (mantida) -->

  <!-- Seção de blog integrada com Substack -->
  <section>
    <div class="container">
      <div class="section-title">
        <h2>Últimas Notícias do Blog</h2>
      </div>
      <div class="blog-posts" id="blog-posts">
        <!-- Postagens do Substack serão carregadas aqui via JavaScript -->
      </div>
    </div>
  </section>

  <!-- Seção de Clipping de Notícias -->
  <section>
    <div class="container">
      <div class="section-title">
        <h2>Clipping de Notícias</h2>
      </div>
      <div class="cards-grid" id="clipping-container">
        <!-- Notícias externas ou geradas por IA aparecerão aqui -->
      </div>
    </div>
  </section>

  <!-- Rodapé mantido -->

  <!-- JavaScript -->
  <script>
    // Menu mobile toggle
    const navToggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('nav');
    if (navToggle && nav) {
      navToggle.addEventListener('click', () => nav.classList.toggle('active'));
      document.addEventListener('click', (e) => {
        if (!e.target.closest('nav') && !e.target.closest('.nav-toggle') && nav.classList.contains('active')) {
          nav.classList.remove('active');
        }
      });
    }

    // Dropdown mobile
    const dropdowns = document.querySelectorAll('.dropdown');
    if (window.innerWidth < 992) {
      dropdowns.forEach(dropdown => dropdown.addEventListener('click', () => dropdown.classList.toggle('active')));
    }

    // Integração com Substack via RSS -> JSON
    fetch("https://api.rss2json.com/v1/api.json?rss_url=https://gavesaude.substack.com/feed")
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById("blog-posts");
        data.items.slice(0, 3).forEach(post => {
          container.innerHTML += `
            <div class="post">
              <div class="post-img">
                <img src="${post.thumbnail || 'images/default.jpg'}" alt="${post.title}">
              </div>
              <div class="post-content">
                <div class="post-date">${new Date(post.pubDate).toLocaleDateString('pt-BR')}</div>
                <h3>${post.title}</h3>
                <p>${post.description.replace(/<[^>]+>/g, '').substring(0, 140)}...</p>
                <a href="${post.link}" class="card-link" target="_blank">Ler mais</a>
              </div>
            </div>
          `;
        });
      });

    // Clipping de notícias (exemplo manual, pode vir de IA depois)
    const clippingNoticias = [
      {
        titulo: "Surto de leptospirose em área alagada no RJ",
        link: "https://g1.globo.com/saude/noticia/2025/05/25/surto-de-leptospirose-no-rj.ghtml",
        imagem: "images/lepto-thumb.jpg"
      },
      {
        titulo: "Nova diretriz da OMS sobre arboviroses",
        link: "https://www.who.int/news/item/2025-05-24-who-updates-guidelines-on-dengue",
        imagem: "images/oms-thumb.jpg"
      }
    ];

    const clippingContainer = document.getElementById("clipping-container");
    clippingNoticias.forEach(n => {
      clippingContainer.innerHTML += `
        <div class="card">
          <div class="card-img" style="height:150px">
            <img src="${n.imagem}" alt="${n.titulo}">
          </div>
          <div class="card-content">
            <h3 style="font-size:1rem">${n.titulo}</h3>
            <a href="${n.link}" class="card-link" target="_blank">Ver notícia</a>
          </div>
        </div>
      `;
    });
  </script>
</body>
</html>
